package model;

import static org.junit.Assert.*;

import java.util.Calendar;
import java.util.Date;

import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MusicDAOImplementTest {
	
	ApplicationContext appContext = new ClassPathXmlApplicationContext("BeanLocations.xml");

	MusicService musicService = (MusicService) appContext.getBean("simpleServiceProxy");
	Calendar calendar = Calendar.getInstance();
	Date currentTime = calendar.getTime();

	@Test
	public void testAdd() {

		Song song = new Song();
		song.setName("Trả Lại Thời Gian");
		song.setAuthor("Thanh Sơn");
		song.setDate(currentTime);
		musicService.add(song);

		Song song2 = musicService.findById(song.getId());
		assertNotNull(song2);
//		assertTrue(song2.equals(song));

	}

	@Test
	public void testUpdate() {
		Song song = musicService.findById(78);
		song.setName("Khác Như Tôi");
		song.setAuthor("Đức Huy");
		song.setDate(currentTime);
		musicService.update(song);

		Song song2 = musicService.findById(song.getId());
		assertSame(song2.getName(),"Khác Như Tôi");
		assertSame(song2.getAuthor(),"Đức Huy");
	}

	@Test
	public void testDelete() {
		Song song = musicService.findById(67);
		musicService.delete(song);
		Song song2 = musicService.findById(song.getId());
		if(song2!=null)
			assertNotNull(song2);
		else assertNull(song2);
	}

}
